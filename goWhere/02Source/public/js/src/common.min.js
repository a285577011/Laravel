!function(){document.write('<script src="/js/src/owPC.api.js"></script>'),$.ajaxSetup({xhrFields:{withCredentials:!0},crossDomain:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},statusCode:{401:function(){alert("登录超时,请重新登入")},403:function(){alert("权限不足")},404:function(){alert("找不到相应资源")},408:function(){alert("请求超时")},422:function(a){var t="";for(var e in a.responseJSON)t+=e+" : "+a.responseJSON[e][0]+"\n";alert(t)},429:function(){alert("请求太频繁,休息一下吧")},500:function(){alert("服务器错误")}}});var a;window.onscroll=function(){a=$(window).scrollTop(),a>=30?$(".header-nav").addClass("nav-top"):$(".header-nav").removeClass("nav-top")},$(".money-type .sub-list li").click(function(){var a=$(this).attr("data-cookie");Cookies.set("currency",a),window.location.reload()}),$(".lang-type .sub-list li").click(function(){var a=$(this).attr("data-cookie");Cookies.set("lang",a),window.location.reload()});var t=$(".login-popup"),e=t.width(),s=t.height();t.css("margin-left",-e/2),$("#goLogin").click(function(){var a=t.find(".get-captcha");$(".full-shade").removeClass("hide"),t.removeClass("hide").animate({marginTop:s/2+"px"},500),a.attr("src",a.attr("data-src")+10*Math.random())}),$(".login-close").click(function(){$(".full-shade").addClass("hide"),t.addClass("hide")}),$(".get-captcha").click(function(){var a=$(this),t=a.attr("src");a.attr("src",t+parseInt(10*Math.random()))}),$(document).on("change",".need-verify",function(){formVerify($(this))}),$("#loginBtn").click(function(){var a,t=$(this),e=1,s=t.closest("form").find("input[name='identity']").val(),r=t.closest("form").find("input[name='password']").val(),i=t.closest("form").find("input[name='captcha']").val();a=$(".l-remember .radio").hasClass("cur")?1:0,t.closest("form").find(".need-verify").each(function(){var a=$(this);formVerify(a),$(this).hasClass("has-error")&&(e=0)}),e&&$.post(owAPI.login,{identity:s,password:r,captcha:i,remember:a},function(a){a.error?(layer.msg(a.msg),$(".get-captcha").trigger("click")):location.reload()})})}();var getSMS=function(a,t){a.addClass("invalid").text("重新发送("+t+")");var e=setInterval(function(){t--,0===t?(a.removeClass("invalid").text("获取验证码"),clearInterval(e)):a.addClass("invalid").text("重新发送("+t+")")},1e3)},regs={dataType:{"*":/[\w\W]+/,username:/^[a-zA-Z][a-zA-Z0-9_]{3,15}$/,m:/^13[0-9]{9}$|14[0-9]{9}|15[0-9]{9}$|18[0-9]{9}$/,e:/^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,psd:/^[\[\]~`|!@^#$%&*()-_=+{};:\'"?\/><,.a-zA-z0-9\\\\]{6,20}$/,"*1-30":/[\w\W]{1,30}/}},formVerify=function(a){var t=a,e=t.val(),s=t.attr("datatype"),r=t.attr("errormsg"),i=t.attr("nullmsg");if(""===$.trim(e))t.siblings(".verify-tip").text(i),t.removeClass("has-success").addClass("has-error");else if(regs.dataType[s].test($.trim(e))){if(t.addClass("has-success").removeClass("has-error"),t.siblings(".verify-tip").text(""),"password_confirmation"===t.attr("name")){var n=t.closest("form").find("input[name='password']").val(),o=t.val();n===o?t.siblings(".verify-tip").text(""):t.siblings(".verify-tip").text(t.attr("psdWrong"))}}else t.siblings(".verify-tip").text(r),t.removeClass("has-success").addClass("has-error")};
